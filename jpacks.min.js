!function(n){function r(n){return String(n).replace(/[\u0080-\u07ff]/g,function(n){var r=n.charCodeAt(0);return String.fromCharCode(192|r>>6,128|63&r)}).replace(/[\u0800-\uffff]/g,function(n){var r=n.charCodeAt(0);return String.fromCharCode(224|r>>12,128|r>>6&63,128|63&r)})}function t(n){return String(n).replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(n){var r=(31&n.charCodeAt(0))<<6|63&n.charCodeAt(1);return String.fromCharCode(r)}).replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(n){var r=(15&n.charCodeAt(0))<<12|(63&n.charCodeAt(1))<<6|63&n.charCodeAt(2);return String.fromCharCode(r)})}function e(n,r){return new s(function(t,e,f){for(var o=[],u=0;r>u;u++)o.push(w(n,t,e,f));return o},function(t,e,f){for(var o=0;r>o;o++)p(n,t[o],e,f)})}function f(n){return e("uint8",n)}function o(n,r){return new s(function(t,e,f){var o=w(n,t,e,f);if(isNaN(o))throw new Error("Length is not a numeric type.");for(var u=[],i=0;o>i;i++)u.push(w(r,t,e,f));return u},function(t,e,f){if(t){p(n,t.length,e,f);for(var o=0;o<t.length;o++)p(r,t[o],e,f)}else p(n,0,e,f)})}function u(n){return o("uint8",n)}function i(n){return o("uint16",n)}function a(n){var e=o(n,"uint8");return new s(function(n,r,f){var o=w(e,n,r,f);return"undefined"!=typeof Buffer?new Buffer(o).toString():t(String.fromCharCode(o))},function(n,t,f){var o;o="undefined"!=typeof Buffer?new Buffer(n):r(n).split(""),p(e,new Buffer(n),t,f)})}function c(n,r){if("number"!=typeof n)throw new Error('Parameter "size" must be a numeric type.');if("object"!=typeof r)throw new Error('Parameter "schemas" must be a object type.');if(r instanceof s)throw new Error('Parameter "schemas" cannot be a Scheam object.');return new s(function(t,e,f){var o=f[0],u={},i=Object.keys(r);return i.forEach(function(n){f[0]=o,u[n]=w(r[n],t,e,f)}),f[0]+=n,u},function(t,e,f){var o=Object.keys(t),u=new ArrayBuffer(n),i=new Uint8Array(u);o.forEach(function(n){var f=[];p(r[n],t[n],e,f),i.set(f)}),[].push.apply(f,i)})}function s(n,r){this.unpack=n,this.pack=r}function h(n,r){l[n]=r}function d(n){if(n instanceof ArrayBuffer)return n;var r=new ArrayBuffer(n.length),t=new Uint8Array(r,0,n.length);return t.set(n),r}function w(n,r,t,e){if(!n)throw new Error('Parameter "schema" is undefined.');if(t=t||{},e=e||[0],n instanceof s||"string"==typeof n&&(n=l[n]),r instanceof ArrayBuffer||(r=d(r)),!n)throw new Error('Parameter "schema" is unregister.');if("function"==typeof n.unpack)return n.unpack(r,t,e);var f={};return Object.keys(n).forEach(function(o){f[o]=w(n[o],r,t,e)}),f}function p(n,r,t,e){if(!n)throw new Error('Parameter "schema" is undefined.');var f;if(e||(e=[],f=!0),n instanceof s||"string"==typeof n&&(n=l[n]),!n)throw new Error('Parameter "schema" is unregister.');return t=t||{},"function"==typeof n.pack?n.pack(r,t,e):Object.keys(n).forEach(function(f){p(n[f],r[f],t,e)}),f?d(e):void 0}var y={},l={};y.array=e,y.bytes=f,y.lengthArray=o,y.shortArray=u,y.longArray=i,y.shortString=a("uint8"),y.longString=a("uint16"),y.union=c,[["int8","Int8",1],["uint8","Uint8",1],["int16","Int16",2],["uint16","Uint16",2],["int32","Int32",4],["uint32","Uint32",4],["float32","Float32",4],["float64","Float64",8]].forEach(function(n){var r=n[0],t=n[1],e=n[2];y[r]=r,l[r]=new s(function(n){return function(r,t,f){var o=f[0];f[0]+=e;var u;return u=r instanceof DataView?r:new DataView(r),u[n](o,t.littleEndian)}}("get"+t),function(n){return function(r,t,f){var o=new ArrayBuffer(e),u=new DataView(o),i=new Uint8Array(o);u[n](0,r,t.littleEndian),[].push.apply(f,i)}}("set"+t))});var m=[["double","float64"],["float","float32"],["byte","uint8"],["word","uint32"]];m.forEach(function(n){var r=n[0],t=n[1];y[r]=l[r]=l[t]}),y.register=h,y.arrayBufferFrom=d,y.unpack=w,y.pack=p,"function"==typeof define?(define.amd||define.cmd)&&define(function(){return y}):"undefined"!=typeof module&&module.exports?module.exports=y:window[n]=y}("jpacks");