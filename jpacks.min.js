!function(n){function r(n){return String(n).replace(/[\u0080-\u07ff]/g,function(n){var r=n.charCodeAt(0);return String.fromCharCode(192|r>>6,128|63&r)}).replace(/[\u0800-\uffff]/g,function(n){var r=n.charCodeAt(0);return String.fromCharCode(224|r>>12,128|r>>6&63,128|63&r)})}function t(n){return String(n).replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(n){var r=(31&n.charCodeAt(0))<<6|63&n.charCodeAt(1);return String.fromCharCode(r)}).replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(n){var r=(15&n.charCodeAt(0))<<12|(63&n.charCodeAt(1))<<6|63&n.charCodeAt(2);return String.fromCharCode(r)})}function e(n,r){return new a(function(t,e,f){for(var u=[],i=0;r>i;i++)u.push(h(n,t,e,f));return u},function(t,e,f){for(var u=0;r>u;u++)s(n,t[u],e,f)})}function f(n,r){return new a(function(t,e,f){var u=h(n,t,e,f);if(isNaN(u))throw new Error("Length is not a numeric type.");for(var i=[],o=0;u>o;o++)i.push(h(r,t,e,f));return i},function(t,e,f){if(t){s(n,t.length,e,f);for(var u=0;u<t.length;u++)s(r,t[u],e,f)}else s(n,0,e,f)})}function u(n){return f("uint8",n)}function i(n){return f("uint16",n)}function o(n){var e=f(n,"uint8");return new a(function(n,r,f){var u=h(e,n,r,f);return"undefined"!=typeof Buffer?new Buffer(u).toString():t(String.fromCharCode(u))},function(n,t,f){var u;u="undefined"!=typeof Buffer?new Buffer(n):r(n).split(""),s(e,new Buffer(n),t,f)})}function a(n,r){this.unpack=n,this.pack=r}function c(n,r){l[n]=r}function d(n){if(n instanceof ArrayBuffer)return n;var r=new ArrayBuffer(n.length),t=new Uint8Array(r,0,n.length);return t.set(n),r}function h(n,r,t,e){if(!n)throw new Error('Parameter "schema" is undefined.');if(t=t||{},e=e||[0],n instanceof a||"string"==typeof n&&(n=l[n]),r instanceof ArrayBuffer||(r=d(r)),!n)throw new Error('Parameter "schema" is unregister.');if("function"==typeof n.unpack)return n.unpack(r,t,e);var f={};return Object.keys(n).forEach(function(u){f[u]=h(n[u],r,t,e)}),f}function s(n,r,t,e){if(!n)throw new Error('Parameter "schema" is undefined.');var f;if(e||(e=[],f=!0),n instanceof a||"string"==typeof n&&(n=l[n]),!n)throw new Error('Parameter "schema" is unregister.');return t=t||{},"function"==typeof n.pack?n.pack(r,t,e):Object.keys(n).forEach(function(f){s(n[f],r[f],t,e)}),f?d(e):void 0}var p={},l={};p.array=e,p.lengthArray=f,p.shortArray=u,p.longArray=i,p.shortString=o("uint8"),p.longString=o("uint16"),[["int8","Int8",1],["uint8","Uint8",1],["int16","Int16",2],["uint16","Uint16",2],["int32","Int32",4],["uint32","Uint32",4],["float32","Float32",4],["float64","Float64",8]].forEach(function(n){var r=n[0],t=n[1],e=n[2];p[r]=r,l[r]=new a(function(n){return function(r,t,f){var u=f[0];f[0]+=e;var i;return i=r instanceof DataView?r:new DataView(r),i[n](u,t.littleEndian)}}("get"+t),function(n){return function(r,t,f){var u=new ArrayBuffer(e),i=new DataView(u),o=new Uint8Array(u);i[n](0,r,t.littleEndian),[].push.apply(f,o)}}("set"+t))});var w=[["double","float64"],["float","float32"],["byte","uint8"],["word","uint32"]];w.forEach(function(n){var r=n[0],t=n[1];p[r]=l[r]=l[t]}),p.register=c,p.arrayBufferFrom=d,p.unpack=h,p.pack=s,"function"==typeof define?(define.amd||define.cmd)&&define(function(){return p}):"undefined"!=typeof module&&module.exports?module.exports=p:window[n]=p}("jpacks");