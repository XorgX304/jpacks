!function(n){function r(n){return String(n).replace(/[\u0080-\u07ff]/g,function(n){var r=n.charCodeAt(0);return String.fromCharCode(192|r>>6,128|63&r)}).replace(/[\u0800-\uffff]/g,function(n){var r=n.charCodeAt(0);return String.fromCharCode(224|r>>12,128|r>>6&63,128|63&r)})}function e(n){return String(n).replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(n){var r=(31&n.charCodeAt(0))<<6|63&n.charCodeAt(1);return String.fromCharCode(r)}).replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(n){var r=(15&n.charCodeAt(0))<<12|(63&n.charCodeAt(1))<<6|63&n.charCodeAt(2);return String.fromCharCode(r)})}function t(n,r){return new h(function(e,t,a){for(var i=[],o=0;r>o;o++)i.push(l(n,e,t,a));return i},function(e,t,a){for(var i=0;r>i;i++)w(n,e[i],t,a)})}function a(n){return t("uint8",n)}function i(n,r){return new h(function(e,t,a){var i=l(n,e,t,a);if(isNaN(i))throw new Error("Length is not a numeric type.");for(var o=[],f=0;i>f;f++)o.push(l(r,e,t,a));return o},function(e,t,a){if(e){w(n,e.length,t,a);for(var i=0;i<e.length;i++)w(r,e[i],t,a)}else w(n,0,t,a)})}function o(n){return i("uint8",n)}function f(n){return i("uint16",n)}function u(n){var t=i(n,"uint8");return new h(function(n,r,a){var i=l(t,n,r,a);return"undefined"!=typeof Buffer?new Buffer(i).toString():e(String.fromCharCode.apply(String,i))},function(n,e,a){var i;i="undefined"!=typeof Buffer?new Buffer(n):r(n).split("").map(function(n){return n.charCodeAt()}),w(t,i,e,a)})}function c(n,r){if("number"!=typeof n)throw new Error('Parameter "size" must be a numeric type.');if("object"!=typeof r)throw new Error('Parameter "schemas" must be a object type.');if(r instanceof h)throw new Error('Parameter "schemas" cannot be a Scheam object.');var e=Object.keys(r);return new h(function(t,a,i){var o=i[0],f={};return e.forEach(function(n){i[0]=o,f[n]=l(r[n],t,a,i)}),i[0]+=n,f},function(t,a,i){var o=new ArrayBuffer(n),f=new Uint8Array(o);e.forEach(function(n){var e=[];w(r[n],t[n],a,e),f.set(e)}),[].push.apply(i,f)})}function s(n){if("object"!=typeof n)throw new Error('Parameter "schemas" must be a object type.');if(n instanceof h)throw new Error('Parameter "schemas" cannot be a Scheam object.');var r=Object.keys(n),e=r[0],t=n[e];return r=r.slice(1),new h(function(a,i,o){var f={},u=l(t,a,i,o);return f[e]=u,r.every(function(r){return u===n[r][0]?(f[r]=l(n[r][1],a,i,o),!1):!0}),f},function(a,i,o){var f=a[e];w(t,f,i,o),r.every(function(r){return f===n[r][0]?(w(n[r][1],a[r],i,o),!1):!0})})}function h(n,r){this.unpack=n,this.pack=r}function d(n,r){v[n]=r}function p(n){if(n instanceof ArrayBuffer)return n;var r=new ArrayBuffer(n.length),e=new Uint8Array(r,0,n.length);return e.set(n),r}function l(n,r,e,t){if(!n)throw new Error('Parameter "schema" is undefined.');if(n instanceof h||"string"==typeof n&&(n=v[n]),r instanceof ArrayBuffer||(r=p(r)),!n)throw new Error('Parameter "schema" is unregister.');if(e=e||{},t=t||[0],"undefined"==typeof e.littleEndian&&(e.littleEndian=E),"function"==typeof n.unpack)return n.unpack(r,e,t);var a={};return Object.keys(n).forEach(function(i){a[i]=l(n[i],r,e,t)}),a}function w(n,r,e,t){if(!n)throw new Error('Parameter "schema" is undefined.');var a;if(t||(t=[],a=!0),n instanceof h||"string"==typeof n&&(n=v[n]),!n)throw new Error('Parameter "schema" is unregister.');return e=e||{},"undefined"==typeof e.littleEndian&&(e.littleEndian=E),"function"==typeof n.pack?n.pack(r,e,t):Object.keys(n).forEach(function(a){w(n[a],r[a],e,t)}),a?p(t):void 0}function y(n){E=n}var m={},v={};m.array=t,m.bytes=a,m.lengthArray=i,m.shortArray=o,m.longArray=f,m.shortString=u("uint8"),m.longString=u("uint16"),m.union=c,m.cases=s,[["int8","Int8",1],["uint8","Uint8",1],["int16","Int16",2],["uint16","Uint16",2],["int32","Int32",4],["uint32","Uint32",4],["float32","Float32",4],["float64","Float64",8]].forEach(function(n){var r=n[0],e=n[1],t=n[2];m[r]=r,v[r]=new h(function(n){return function(r,e,a){var i=a[0];a[0]+=t;var o;return o=r instanceof DataView?r:new DataView(r),o[n](i,e.littleEndian)}}("get"+e),function(n){return function(r,e,a){var i=new ArrayBuffer(t),o=new DataView(i),f=new Uint8Array(i);o[n](0,r,e.littleEndian),[].push.apply(a,f)}}("set"+e))});var g=[["double","float64"],["float","float32"],["byte","uint8"],["word","uint32"]];g.forEach(function(n){var r=n[0],e=n[1];m[r]=v[r]=v[e]}),m.register=d,m.arrayBufferFrom=p,m.unpack=l,m.pack=w;var E;m.setDefaultLittleEndian=y,"function"==typeof define?(define.amd||define.cmd)&&define(function(){return m}):"undefined"!=typeof module&&module.exports?module.exports=m:window[n]=m}("jpacks");